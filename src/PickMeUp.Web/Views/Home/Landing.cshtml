@using Microsoft.Extensions.Options
@using PickMeUp.Core.Services.GoogleRoutes

@inject IOptions<GoogleSettings> _googleSettings

@{
    ViewData["Title"] = "Pick-me-UP - Find your way";
    Layout = "_Layout";
}

<div class="pmu-landing">
    <div class="pmu-content">
        <h1 class="pmu-title">Find your way</h1>
        
            <form id="searchApp" @@submit.prevent>
                <div class="pmu-form-group">
                    <div id="departure-container">
                        <label for="departure-input">Indirizzo di Partenza</label>
                    </div>
                    <div class="invalid-feedback" v-if="state.submitted && !isDepartureValid">
                        Seleziona un punto di partenza dai suggerimenti
                    </div>
                </div>
                
                <div class="pmu-form-group">
                    <div id="destination-container">
                        <label for="destination-input">La Tua Destinazione</label>
                    </div>
                    <div class="invalid-feedback" v-if="state.submitted && !isDestinationValid">
                        Seleziona una destinazione dai suggerimenti
                    </div>
                </div>
                
                <div class="pmu-form-row">
                    <div class="pmu-form-group">
                        <label for="departureDate">Data partenza</label>
                        <input type="date" 
                               id="departureDate" 
                               v-model="state.departureDate"
                               class="pmu-form-control" />
                    </div>
                    
                    <div class="pmu-form-group">
                        <label for="departureTime">Ora</label>
                        <input type="time" 
                               id="departureTime" 
                               v-model="state.departureTime"
                               class="pmu-form-control" />
                    </div>
                </div>
                
                <div class="pmu-action-buttons">
                    <button type="button" class="pmu-btn pmu-btn-success" @@click="handleFindRide">
                        ðŸš— Trova un Passaggio
                    </button>
                    <button type="button" class="pmu-btn pmu-btn-primary pmu-outline" @@click="handleAddTrip">
                        âž• Aggiungi un Viaggio
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section scripts {
    <script src="https://unpkg.com/vue@3"></script>
    <script src="~/js/landing.js" asp-append-version="true"></script>
    <script async
            src="https://maps.googleapis.com/maps/api/js?key=@(_googleSettings.Value.MapsApiKey)&loading=async&callback=initVueApp">
    </script>
}


